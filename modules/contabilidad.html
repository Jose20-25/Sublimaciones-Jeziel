<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contabilidad - Sublimaciones Jeziel</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #f7fafc;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: linear-gradient(180deg, #1a202c 0%, #2d3748 100%);
            box-shadow: 4px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
            text-decoration: none;
        }

        .sidebar-logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .sidebar-logo-text {
            font-size: 20px;
            font-weight: 700;
            color: white;
        }

        .sidebar-nav {
            padding: 20px 0;
        }

        .nav-section {
            margin-bottom: 25px;
        }

        .nav-section-title {
            padding: 0 20px 8px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #a0aec0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #e2e8f0;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: white;
            border-left-color: #667eea;
        }

        .nav-item.active {
            background: rgba(102, 126, 234, 0.15);
            color: #90cdf4;
            border-left-color: #667eea;
        }

        .nav-item i {
            width: 24px;
            margin-right: 12px;
            text-align: center;
            font-size: 16px;
        }

        /* Main Content */
        .main-layout {
            margin-left: 280px;
            min-height: 100vh;
        }

        .header {
            background: white;
            padding: 20px 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-title {
            font-size: 28px;
            font-weight: 700;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-title i {
            color: #667eea;
        }

        .breadcrumb {
            font-size: 14px;
            color: #718096;
        }

        .breadcrumb a {
            color: #667eea;
            text-decoration: none;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: white;
            color: #4a5568;
            border: 2px solid #e2e8f0;
            padding: 10px 20px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-secondary:hover {
            border-color: #667eea;
            color: #667eea;
        }

        /* Content Area */
        .content {
            padding: 30px;
        }

        /* Accounting Dashboard */
        .accounting-dashboard {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        /* Financial Summary */
        .financial-summary {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 25px;
        }

        .summary-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 25px;
        }

        .summary-title {
            font-size: 20px;
            font-weight: 700;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .period-selector {
            display: flex;
            gap: 10px;
        }

        .period-btn {
            padding: 8px 16px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .period-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .period-btn:hover:not(.active) {
            border-color: #667eea;
            color: #667eea;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .summary-stat {
            padding: 20px;
            background: #f7fafc;
            border-radius: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            color: #718096;
            font-weight: 600;
        }

        .stat-change {
            font-size: 12px;
            font-weight: 600;
            margin-top: 5px;
        }

        .stat-change.positive {
            color: #38a169;
        }

        .stat-change.negative {
            color: #e53e3e;
        }

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        /* Quick Actions */
        .quick-actions {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 25px;
        }

        .actions-title {
            font-size: 20px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .action-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 10px;
            border: 2px solid transparent;
        }

        .action-item:hover {
            background: #f7fafc;
            border-color: #e2e8f0;
        }

        .action-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            margin-right: 15px;
        }

        .action-income .action-icon {
            background: #38a169;
        }

        .action-expense .action-icon {
            background: #e53e3e;
        }

        .action-report .action-icon {
            background: #3182ce;
        }

        .action-reconcile .action-icon {
            background: #805ad5;
        }

        .action-content h4 {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .action-content p {
            font-size: 14px;
            color: #718096;
        }

        /* Accounts Section */
        .accounts-section {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }

        .section-header {
            padding: 25px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .accounts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 25px;
        }

        .account-card {
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .account-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
        }

        .account-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .account-name {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
        }

        .account-type {
            font-size: 12px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 12px;
            text-transform: uppercase;
        }

        .type-asset {
            background: #c6f6d5;
            color: #2f855a;
        }

        .type-liability {
            background: #fed7d7;
            color: #c53030;
        }

        .type-equity {
            background: #bee3f8;
            color: #2b6cb0;
        }

        .type-revenue {
            background: #feebc8;
            color: #c05621;
        }

        .type-expense {
            background: #e2e8f0;
            color: #4a5568;
        }

        .account-balance {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
        }

        .account-details {
            font-size: 14px;
            color: #718096;
            margin-top: 10px;
        }

        /* Transactions Table */
        .transactions-section {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .transactions-header {
            padding: 25px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .transactions-table {
            width: 100%;
            border-collapse: collapse;
        }

        .transactions-table th {
            background: #f7fafc;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            color: #4a5568;
            font-size: 14px;
            border-bottom: 2px solid #e2e8f0;
        }

        .transactions-table td {
            padding: 16px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 14px;
        }

        .transactions-table tbody tr:hover {
            background: #f7fafc;
        }

        .transaction-type {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .type-income {
            background: #c6f6d5;
            color: #2f855a;
        }

        .type-expense {
            background: #fed7d7;
            color: #c53030;
        }

        .amount-positive {
            color: #38a169;
            font-weight: 600;
        }

        .amount-negative {
            color: #e53e3e;
            font-weight: 600;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 50px auto;
            padding: 30px;
            width: 90%;
            max-width: 600px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #718096;
            transition: color 0.3s ease;
        }

        .close-btn:hover {
            color: #e53e3e;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-size: 14px;
            font-weight: 600;
            color: #4a5568;
        }

        .form-input {
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .form-textarea {
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
            transition: all 0.3s ease;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .btn-cancel {
            background: #e2e8f0;
            color: #4a5568;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-cancel:hover {
            background: #cbd5e0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                width: 70px;
            }

            .main-layout {
                margin-left: 70px;
            }

            .sidebar-logo-text {
                display: none;
            }

            .nav-item span {
                display: none;
            }

            .header {
                padding: 15px 20px;
            }

            .header-title {
                font-size: 20px;
            }

            .content {
                padding: 20px;
            }

            .accounting-dashboard {
                grid-template-columns: 1fr;
            }

            .accounts-grid {
                grid-template-columns: 1fr;
            }

            .summary-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <a href="../index.html" class="sidebar-logo">
                <div class="sidebar-logo-icon">
                    <i class="fas fa-sublimation-icon" style="font-size: 20px;">SJ</i>
                </div>
                <span class="sidebar-logo-text">Sublimaciones Jeziel</span>
            </a>
        </div>
        
        <nav class="sidebar-nav">
            <div class="nav-section">
                <div class="nav-section-title">Principal</div>
                <a href="../index.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Operaciones</div>
                <a href="inventario.html" class="nav-item">
                    <i class="fas fa-boxes"></i>
                    <span>Inventario</span>
                </a>
                <a href="ventas.html" class="nav-item">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Ventas</span>
                </a>
                <a href="compras.html" class="nav-item">
                    <i class="fas fa-shopping-bag"></i>
                    <span>Compras</span>
                </a>
                <a href="produccion.html" class="nav-item">
                    <i class="fas fa-industry"></i>
                    <span>Producción</span>
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Contactos</div>
                <a href="clientes.html" class="nav-item">
                    <i class="fas fa-users"></i>
                    <span>Clientes</span>
                </a>
                <a href="proveedores.html" class="nav-item">
                    <i class="fas fa-truck"></i>
                    <span>Proveedores</span>
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Finanzas</div>
                <a href="facturas.html" class="nav-item">
                    <i class="fas fa-file-invoice"></i>
                    <span>Facturas</span>
                </a>
                <a href="contabilidad.html" class="nav-item active">
                    <i class="fas fa-calculator"></i>
                    <span>Contabilidad</span>
                </a>
                <a href="finanzas.html" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    <span>Finanzas</span>
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Análisis</div>
                <a href="reportes.html" class="nav-item">
                    <i class="fas fa-chart-bar"></i>
                    <span>Reportes</span>
                </a>
            </div>
            
            <div class="nav-section">
                <div class="nav-section-title">Sistema</div>
                <a href="configuracion.html" class="nav-item">
                    <i class="fas fa-cog"></i>
                    <span>Configuración</span>
                </a>
                <a href="soporte.html" class="nav-item">
                    <i class="fas fa-life-ring"></i>
                    <span>Soporte</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Main Content -->
    <div class="main-layout">
        <header class="header">
            <div class="header-left">
                <div>
                    <h1 class="header-title">
                        <i class="fas fa-calculator"></i>
                        Contabilidad
                    </h1>
                    <div class="breadcrumb">
                        <a href="../index.html">Dashboard</a> / Contabilidad
                    </div>
                </div>
            </div>
            <div class="header-actions">
                <button class="btn-secondary" onclick="exportAccounting()">
                    <i class="fas fa-download"></i>
                    Exportar
                </button>
                <button class="btn-primary" onclick="openTransactionModal()">
                    <i class="fas fa-plus"></i>
                    Nueva Transacción
                </button>
            </div>
        </header>

        <main class="content">
            <!-- Accounting Dashboard -->
            <div class="accounting-dashboard">
                <!-- Financial Summary -->
                <div class="financial-summary">
                    <div class="summary-header">
                        <h2 class="summary-title">
                            <i class="fas fa-chart-pie"></i>
                            Resumen Financiero
                        </h2>
                        <div class="period-selector">
                            <button class="period-btn" onclick="changePeriod('month')">Mes</button>
                            <button class="period-btn active" onclick="changePeriod('quarter')">Trimestre</button>
                            <button class="period-btn" onclick="changePeriod('year')">Año</button>
                        </div>
                    </div>
                    
                    <div class="summary-stats">
                        <div class="summary-stat">
                            <div class="stat-value">$67,450</div>
                            <div class="stat-label">Ingresos Totales</div>
                            <div class="stat-change positive">+15.2% vs período anterior</div>
                        </div>
                        <div class="summary-stat">
                            <div class="stat-value">$43,280</div>
                            <div class="stat-label">Gastos Totales</div>
                            <div class="stat-change negative">+8.7% vs período anterior</div>
                        </div>
                        <div class="summary-stat">
                            <div class="stat-value">$24,170</div>
                            <div class="stat-label">Utilidad Neta</div>
                            <div class="stat-change positive">+28.5% vs período anterior</div>
                        </div>
                        <div class="summary-stat">
                            <div class="stat-value">35.8%</div>
                            <div class="stat-label">Margen de Utilidad</div>
                            <div class="stat-change positive">+3.2% vs período anterior</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="financialChart"></canvas>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h3 class="actions-title">
                        <i class="fas fa-bolt"></i>
                        Acciones Rápidas
                    </h3>
                    
                    <div class="action-item action-income" onclick="openTransactionModal('income')">
                        <div class="action-icon">
                            <i class="fas fa-plus"></i>
                        </div>
                        <div class="action-content">
                            <h4>Registrar Ingreso</h4>
                            <p>Agregar una entrada de dinero</p>
                        </div>
                    </div>
                    
                    <div class="action-item action-expense" onclick="openTransactionModal('expense')">
                        <div class="action-icon">
                            <i class="fas fa-minus"></i>
                        </div>
                        <div class="action-content">
                            <h4>Registrar Gasto</h4>
                            <p>Agregar una salida de dinero</p>
                        </div>
                    </div>
                    
                    <div class="action-item action-report" onclick="generateReport()">
                        <div class="action-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="action-content">
                            <h4>Generar Reporte</h4>
                            <p>Estados financieros</p>
                        </div>
                    </div>
                    
                    <div class="action-item action-reconcile" onclick="reconcileAccounts()">
                        <div class="action-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <div class="action-content">
                            <h4>Conciliar Cuentas</h4>
                            <p>Verificar saldos bancarios</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Accounts Section -->
            <div class="accounts-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-wallet"></i>
                        Plan de Cuentas
                    </h2>
                    <button class="btn-primary" onclick="openAccountModal()">
                        <i class="fas fa-plus"></i>
                        Nueva Cuenta
                    </button>
                </div>
                
                <div class="accounts-grid">
                    <div class="account-card">
                        <div class="account-header">
                            <div class="account-name">Caja</div>
                            <div class="account-type type-asset">Activo</div>
                        </div>
                        <div class="account-balance">$8,450.00</div>
                        <div class="account-details">Efectivo en caja registradora</div>
                    </div>
                    
                    <div class="account-card">
                        <div class="account-header">
                            <div class="account-name">Banco Principal</div>
                            <div class="account-type type-asset">Activo</div>
                        </div>
                        <div class="account-balance">$25,680.00</div>
                        <div class="account-details">Cuenta corriente principal</div>
                    </div>
                    
                    <div class="account-card">
                        <div class="account-header">
                            <div class="account-name">Inventario</div>
                            <div class="account-type type-asset">Activo</div>
                        </div>
                        <div class="account-balance">$15,320.00</div>
                        <div class="account-details">Productos en stock</div>
                    </div>
                    
                    <div class="account-card">
                        <div class="account-header">
                            <div class="account-name">Cuentas por Pagar</div>
                            <div class="account-type type-liability">Pasivo</div>
                        </div>
                        <div class="account-balance">$4,850.00</div>
                        <div class="account-details">Deudas a proveedores</div>
                    </div>
                    
                    <div class="account-card">
                        <div class="account-header">
                            <div class="account-name">Ventas</div>
                            <div class="account-type type-revenue">Ingreso</div>
                        </div>
                        <div class="account-balance">$67,450.00</div>
                        <div class="account-details">Ingresos por ventas</div>
                    </div>
                    
                    <div class="account-card">
                        <div class="account-header">
                            <div class="account-name">Gastos Operativos</div>
                            <div class="account-type type-expense">Gasto</div>
                        </div>
                        <div class="account-balance">$18,920.00</div>
                        <div class="account-details">Gastos de operación</div>
                    </div>
                </div>
            </div>

            <!-- Recent Transactions -->
            <div class="transactions-section">
                <div class="transactions-header">
                    <h2 class="section-title">
                        <i class="fas fa-exchange-alt"></i>
                        Transacciones Recientes
                    </h2>
                    <button class="btn-secondary" onclick="viewAllTransactions()">
                        Ver Todas
                    </button>
                </div>
                
                <table class="transactions-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Descripción</th>
                            <th>Cuenta</th>
                            <th>Tipo</th>
                            <th>Monto</th>
                            <th>Referencia</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>02/09/2025</td>
                            <td>Venta de camisetas personalizadas</td>
                            <td>Ventas</td>
                            <td><span class="transaction-type type-income">Ingreso</span></td>
                            <td class="amount-positive">+$2,500.00</td>
                            <td>FAC-001</td>
                        </tr>
                        <tr>
                            <td>01/09/2025</td>
                            <td>Compra de materiales sublimación</td>
                            <td>Inventario</td>
                            <td><span class="transaction-type type-expense">Gasto</span></td>
                            <td class="amount-negative">-$850.00</td>
                            <td>COMP-012</td>
                        </tr>
                        <tr>
                            <td>01/09/2025</td>
                            <td>Pago servicios públicos</td>
                            <td>Gastos Operativos</td>
                            <td><span class="transaction-type type-expense">Gasto</span></td>
                            <td class="amount-negative">-$320.00</td>
                            <td>SERV-001</td>
                        </tr>
                        <tr>
                            <td>31/08/2025</td>
                            <td>Venta de tazas sublimadas</td>
                            <td>Ventas</td>
                            <td><span class="transaction-type type-income">Ingreso</span></td>
                            <td class="amount-positive">+$1,800.00</td>
                            <td>FAC-002</td>
                        </tr>
                        <tr>
                            <td>30/08/2025</td>
                            <td>Pago alquiler local</td>
                            <td>Gastos Operativos</td>
                            <td><span class="transaction-type type-expense">Gasto</span></td>
                            <td class="amount-negative">-$1,200.00</td>
                            <td>ALQ-001</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <!-- Modal Nueva Transacción -->
    <div id="transactionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Nueva Transacción</h2>
                <button class="close-btn" onclick="closeTransactionModal()">&times;</button>
            </div>
            
            <form id="transactionForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Tipo de Transacción *</label>
                        <select class="form-input" id="transactionType" required>
                            <option value="">Seleccionar tipo</option>
                            <option value="income">Ingreso</option>
                            <option value="expense">Gasto</option>
                            <option value="transfer">Transferencia</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Cuenta *</label>
                        <select class="form-input" id="transactionAccount" required>
                            <option value="">Seleccionar cuenta</option>
                            <option value="caja">Caja</option>
                            <option value="banco">Banco Principal</option>
                            <option value="inventario">Inventario</option>
                            <option value="ventas">Ventas</option>
                            <option value="gastos">Gastos Operativos</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Monto *</label>
                        <input type="number" class="form-input" id="transactionAmount" placeholder="0.00" step="0.01" min="0" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Fecha *</label>
                        <input type="date" class="form-input" id="transactionDate" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Referencia</label>
                        <input type="text" class="form-input" id="transactionReference" placeholder="Número de factura, recibo, etc.">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Método de Pago</label>
                        <select class="form-input" id="paymentMethod">
                            <option value="efectivo">Efectivo</option>
                            <option value="transferencia">Transferencia</option>
                            <option value="cheque">Cheque</option>
                            <option value="tarjeta">Tarjeta</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Descripción *</label>
                    <textarea class="form-textarea" id="transactionDescription" placeholder="Descripción de la transacción..." required></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeTransactionModal()">Cancelar</button>
                    <button type="submit" class="btn-primary">Registrar Transacción</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Variables globales
        let financialChart;

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            setDefaultDate();
            initializeFinancialChart();
        });

        // Establecer fecha por defecto
        function setDefaultDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('transactionDate').value = today;
        }

        // Inicializar gráfico financiero
        function initializeFinancialChart() {
            const ctx = document.getElementById('financialChart').getContext('2d');
            
            financialChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep'],
                    datasets: [{
                        label: 'Ingresos',
                        data: [12000, 15000, 18000, 16000, 22000, 25000, 28000, 24000, 26000],
                        borderColor: '#38a169',
                        backgroundColor: 'rgba(56, 161, 105, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Gastos',
                        data: [8000, 9500, 11000, 10500, 14000, 16000, 18000, 15500, 17000],
                        borderColor: '#e53e3e',
                        backgroundColor: 'rgba(229, 62, 62, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        // Cambiar período del gráfico
        function changePeriod(period) {
            // Actualizar botones activos
            document.querySelectorAll('.period-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Aquí se actualizarían los datos del gráfico según el período
            showNotification(`Vista cambiada a: ${period}`, 'info');
        }

        // Abrir modal de transacción
        function openTransactionModal(type = null) {
            document.getElementById('transactionModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            if (type) {
                document.getElementById('transactionType').value = type;
            }
            
            setDefaultDate();
        }

        // Cerrar modal de transacción
        function closeTransactionModal() {
            document.getElementById('transactionModal').style.display = 'none';
            document.body.style.overflow = 'auto';
            document.getElementById('transactionForm').reset();
        }

        // Abrir modal de cuenta
        function openAccountModal() {
            alert('Modal de nueva cuenta en desarrollo.\nPróximamente podrás crear nuevas cuentas contables.');
        }

        // Generar reporte
        function generateReport() {
            alert('Generación de reportes en desarrollo.\nPróximamente podrás generar estados financieros completos.');
        }

        // Conciliar cuentas
        function reconcileAccounts() {
            alert('Conciliación bancaria en desarrollo.\nPróximamente podrás reconciliar tus cuentas bancarias.');
        }

        // Ver todas las transacciones
        function viewAllTransactions() {
            alert('Vista completa de transacciones en desarrollo.\nPróximamente tendrás acceso a un historial completo.');
        }

        // Exportar contabilidad
        function exportAccounting() {
            const wb = XLSX.utils.book_new();
            
            // Datos de ejemplo para export
            const accountsData = [
                ['Cuenta', 'Tipo', 'Saldo'],
                ['Caja', 'Activo', '$8,450.00'],
                ['Banco Principal', 'Activo', '$25,680.00'],
                ['Inventario', 'Activo', '$15,320.00'],
                ['Cuentas por Pagar', 'Pasivo', '$4,850.00'],
                ['Ventas', 'Ingreso', '$67,450.00'],
                ['Gastos Operativos', 'Gasto', '$18,920.00']
            ];
            
            const transactionsData = [
                ['Fecha', 'Descripción', 'Cuenta', 'Tipo', 'Monto'],
                ['02/09/2025', 'Venta de camisetas', 'Ventas', 'Ingreso', '$2,500.00'],
                ['01/09/2025', 'Compra materiales', 'Inventario', 'Gasto', '-$850.00'],
                ['01/09/2025', 'Servicios públicos', 'Gastos', 'Gasto', '-$320.00'],
                ['31/08/2025', 'Venta de tazas', 'Ventas', 'Ingreso', '$1,800.00'],
                ['30/08/2025', 'Alquiler', 'Gastos', 'Gasto', '-$1,200.00']
            ];
            
            const wsAccounts = XLSX.utils.aoa_to_sheet(accountsData);
            const wsTransactions = XLSX.utils.aoa_to_sheet(transactionsData);
            
            XLSX.utils.book_append_sheet(wb, wsAccounts, 'Cuentas');
            XLSX.utils.book_append_sheet(wb, wsTransactions, 'Transacciones');
            
            const date = new Date().toISOString().split('T')[0];
            XLSX.writeFile(wb, `contabilidad_${date}.xlsx`);
            
            showNotification('Reporte contable exportado exitosamente', 'success');
        }

        // Manejar envío del formulario
        document.getElementById('transactionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                type: document.getElementById('transactionType').value,
                account: document.getElementById('transactionAccount').value,
                amount: document.getElementById('transactionAmount').value,
                date: document.getElementById('transactionDate').value,
                reference: document.getElementById('transactionReference').value,
                paymentMethod: document.getElementById('paymentMethod').value,
                description: document.getElementById('transactionDescription').value
            };

            console.log('Nueva transacción:', formData);
            
            closeTransactionModal();
            showNotification('Transacción registrada exitosamente', 'success');
        });

        // Mostrar notificaciones
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 3000;
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.3s ease;
            `;

            const colors = {
                'success': '#38a169',
                'error': '#e53e3e',
                'warning': '#dd6b20',
                'info': '#3182ce'
            };

            notification.style.background = colors[type] || colors.info;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateX(0)';
            }, 100);

            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Cerrar modal al hacer clic fuera
        window.addEventListener('click', function(e) {
            const modal = document.getElementById('transactionModal');
            if (e.target === modal) {
                closeTransactionModal();
            }
        });

        // Cerrar modal con ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeTransactionModal();
            }
        });
    </script>
</body>
</html>
